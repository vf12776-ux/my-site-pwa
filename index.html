<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Croissant77 - –ú–æ–π —Å–∞–π—Ç</title>
    
    <!-- –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –∏–∫–æ–Ω–∫–∏ –î–û —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ -->
    <link rel="icon" href="icons/icon192.png" type="image/png">
    <link rel="shortcut icon" href="icons/icon192.png" type="image/png">
    <link rel="apple-touch-icon" href="icons/icon192.png">
    
    <!-- PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#f5576c">
    
    <!-- –î–ª—è iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Croissant77">
    
    <!-- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∫–æ–Ω–∫–∏ -->
    <link rel="preload" href="icons/icon192.png" as="image" type="image/png">
    
    <style>
        /* –°—Ç–∏–ª–∏ –¥–ª—è –ª–æ–∞–¥–µ—Ä–∞ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }
        
        .loader-container {
            padding: 40px;
            max-width: 400px;
        }
        
        .loader-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            border-radius: 20px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            color: #f5576c;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            font-size: 24px;
            margin-bottom: 15px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            margin: 20px auto;
            border: 4px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .direct-link {
            display: inline-block;
            margin-top: 20px;
            padding: 12px 24px;
            background: white;
            color: #f5576c;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            transition: transform 0.2s;
        }
        
        .direct-link:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="loader-container">
        <div class="loader-icon">üöÄ</div>
        <h1>Croissant77</h1>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞...</p>
        
        <div class="spinner"></div>
        
        <a href="https://croissant77.ru/page2" class="direct-link" id="directLink">
            –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞–ø—Ä—è–º—É—é
        </a>
    </div>

    <script>
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ favicon (–Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ Craftum –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å)
        function enforceFavicon() {
            const link = document.createElement('link');
            link.rel = 'icon';
            link.href = 'icons/icon192.png';
            link.type = 'image/png';
            
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ favicon
            const oldIcons = document.querySelectorAll('link[rel*="icon"]');
            oldIcons.forEach(icon => icon.remove());
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞—à
            document.head.appendChild(link);
            
            // –î–ª—è Safari iOS
            const appleIcon = document.createElement('link');
            appleIcon.rel = 'apple-touch-icon';
            appleIcon.href = 'icons/icon192.png';
            document.head.appendChild(appleIcon);
        }
        
        // –í—ã–∑—ã–≤–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
        enforceFavicon();
        setTimeout(enforceFavicon, 100);
        setTimeout(enforceFavicon, 500);
        
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(reg => console.log('PWA –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', reg))
                .catch(err => console.log('–û—à–∏–±–∫–∞ PWA:', err));
        }
        
        // –£–º–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º favicon
        let iconSet = false;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –ª–∏ favicon
        const checkFavicon = setInterval(() => {
            const icons = document.querySelectorAll('link[rel*="icon"]');
            const hasOurIcon = Array.from(icons).some(icon => 
                icon.href.includes('icon192.png') || 
                icon.href.includes('my-site-pwa')
            );
            
            if (hasOurIcon) {
                iconSet = true;
                console.log('–ù–∞—à favicon —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!');
            }
        }, 100);
        
        // –†–µ–¥–∏—Ä–µ–∫—Ç —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã (–¥–∞–µ–º –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å favicon)
        setTimeout(() => {
            clearInterval(checkFavicon);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ sessionStorage, —á—Ç–æ favicon –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
            if (iconSet) {
                sessionStorage.setItem('favicon_set', 'true');
            }
            
            // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å–∞–π—Ç
            window.location.href = 'https://croissant77.ru/page2';
        }, 2000);
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–∏
        document.getElementById('directLink').addEventListener('click', (e) => {
            e.preventDefault();
            sessionStorage.setItem('favicon_set', 'true');
            window.location.href = 'https://croissant77.ru/page2';
        });
        
        // –ù–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ—Ä–Ω–µ—Ç—Å—è –Ω–∞–∑–∞–¥
        window.addEventListener('pageshow', (event) => {
            if (event.persisted) {
                enforceFavicon();
            }
        });
    </script>
</body>
</html>