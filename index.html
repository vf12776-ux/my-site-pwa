<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Croissant77</title>
    <link rel="icon" href="icons/icon192.png">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#f5576c">
    <style>
        body {
            font-family: sans-serif;
            padding: 40px;
            text-align: center;
        }
        a {
            display: inline-block;
            padding: 15px 30px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-size: 18px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Croissant77</h1>
    <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–∞–π—Ç–∞</p>
    <a href="https://croissant77.ru/page2">–û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç</a>
    
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js');
        }
    </script>
    <script>
// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö PWA
if ('serviceWorker' in navigator) {
  // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  navigator.serviceWorker.register('/service-worker.js?v=' + Date.now())
    .then(registration => {
      console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω');
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
      registration.addEventListener('updatefound', () => {
        console.log('üîÑ –ù–∞–π–¥–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Service Worker');
      });
      
      // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è
      setInterval(() => {
        registration.update();
      }, 60 * 1000); // –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
    });
}

// –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ –∫–∞–∫ PWA - –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Å–∏—é
if (window.matchMedia('(display-mode: standalone)').matches) {
  console.log('üì± –ó–∞–ø—É—â–µ–Ω–æ –∫–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ PWA');
  
  // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –µ—Å–ª–∏ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è
  const currentVersion = 'v3'; // –î–û–õ–ñ–ù–û –°–û–í–ü–ê–î–ê–¢–¨ –° service-worker.js
  const storedVersion = localStorage.getItem('pwa_version');
  
  if (storedVersion !== currentVersion) {
    console.log('üîÑ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è, –æ–±–Ω–æ–≤–ª—è–µ–º...');
    localStorage.setItem('pwa_version', currentVersion);
    
    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    setTimeout(() => location.reload(), 1000);
  }
}
</script>
</body>
</html>
